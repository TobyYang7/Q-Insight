{
    "version": "0.2.0",
    "configurations": [
            {
            "name": "multi-task RL",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/torchrun",
            "args": [
                "--nproc_per_node=8",
                "--nnodes=1",
                "--node_rank=0",
                "--master_addr=127.0.0.1",
                "--master_port=12345",
                "${workspaceFolder}/src/open-r1-multimodal/src/open_r1/eval_multi_task.py",
                "--deepspeed", "${workspaceFolder}/src/open-r1-multimodal/local_scripts/zero2.json",
                "--output_dir", "${workspaceFolder}/src/open-r1-multimodal/output/Q-Insight-eval-multi-task-rl-debug-8gpu",
                "--model_name_or_path", "Qwen/Qwen2.5-VL-7B-Instruct",
                "--dataset_name", "None",
                "--dataset_score", "${workspaceFolder}/src/open-r1-multimodal/data_config/iqa_score_custom.yaml",
                "--dataset_deficiency", "${workspaceFolder}/src/open-r1-multimodal/data_config/slideaudit.yaml",
                "--max_prompt_length", "4096",
                "--num_generations", "8",
                "--per_device_train_batch_size", "1",
                "--gradient_accumulation_steps", "2",
                "--logging_steps", "1",
                "--bf16",
                "--torch_dtype", "bfloat16",
                "--data_seed", "42",
                "--report_to", "none",
                "--gradient_checkpointing", "false",
                "--attn_implementation", "flash_attention_2",
                "--num_train_epochs", "3",
                "--run_name", "Q-Insight-eval-multi-task-rl-debug-8gpu",
                "--save_steps", "500",
                "--save_only_model", "true",
                "--score_reward_threshold", "0.5",
                "--beta", "0.001"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}/src/open-r1-multimodal",
            "env": {
                "DEBUG_MODE": "false",
                "LOG_PATH": "./debug_log_Q-Insight-eval-score-rl-debug-8gpu.txt",
                "OMP_NUM_THREADS": "8",
                "NCCL_IB_DISABLE": "0",
                "NCCL_IB_GID_INDEX": "3",
                "NCCL_SOCKET_IFNAME": "eth0",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True",
                "NCCL_DEBUG": "OFF"
            },
            "python": "/root/Q-Insight/.venv/bin/python",
            "justMyCode": false,
            "stopOnEntry": false,
            "subProcess": true
        },
        {
            "name": "Q-Insight Training Debug (Single GPU)",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/src/open-r1-multimodal/src/open_r1/qinsight_comparison.py",
            "args": [
                "--deepspeed", "${workspaceFolder}/src/open-r1-multimodal/local_scripts/zero3.json",
                "--output_dir", "${workspaceFolder}/src/open-r1-multimodal/output/Q-Insight-comparison-debug",
                "--model_name_or_path", "Qwen/Qwen2.5-VL-7B-Instruct",
                "--dataset_name", "None",
                "--dataset_comparison", "${workspaceFolder}/src/open-r1-multimodal/data_config/iqa_comparison.yaml",
                "--image_root", "${workspaceFolder}/src/open-r1-multimodal/data/DiffIQA/ValidationImage/images",
                "--max_prompt_length", "2048",
                "--num_generations", "8",
                "--per_device_train_batch_size", "2",
                "--gradient_accumulation_steps", "2",
                "--logging_steps", "1",
                "--bf16",
                "--torch_dtype", "bfloat16",
                "--data_seed", "42",
                "--report_to", "wandb",
                "--gradient_checkpointing", "false",
                "--attn_implementation", "flash_attention_2",
                "--num_train_epochs", "1",
                "--run_name", "Q-Insight-comparison-debug",
                "--save_steps", "100",
                "--save_only_model", "true",
                "--score_reward_threshold", "0.35",
                "--beta", "0.001"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}/src/open-r1-multimodal",
            "env": {
                "DEBUG_MODE": "true",
                "LOG_PATH": "./debug_log_Q-Insight-comparison-debug.txt",
                "OMP_NUM_THREADS": "8",
                "NCCL_IB_DISABLE": "0",
                "NCCL_IB_GID_INDEX": "3",
                "NCCL_SOCKET_IFNAME": "eth0",
                "COMPILE_GAN": "0",
                "USE_TIMELINE_SDK": "1",
                "CUDA_TIMER_STREAM_KAFKA_CLUSTER": "bmq_data_va",
                "CUDA_TIMER_STREAM_KAFKA_TOPIC": "megatron_cuda_timer_tracing_original_v2",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True",
                "MASTER_ADDR": "127.0.0.1",
                "MASTER_PORT": "12345",
                "RANK": "0",
                "LOCAL_RANK": "0",
                "WORLD_SIZE": "8",
                "NCCL_DEBUG": "INFO"
            },
            "python": "/root/Q-Insight/.venv/bin/python",
            "justMyCode": false,
            "stopOnEntry": false,
            "subProcess": true
        },
        {
            "name": "Q-Insight Training Debug (8 GPUs via torchrun)",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/torchrun",
            "args": [
                "--nproc_per_node=8",
                "--nnodes=1", 
                "--node_rank=0",
                "--master_addr=127.0.0.1",
                "--master_port=12345",
                "${workspaceFolder}/src/open-r1-multimodal/src/open_r1/qinsight_comparison.py",
                "--deepspeed", "${workspaceFolder}/src/open-r1-multimodal/local_scripts/zero3.json",
                "--output_dir", "${workspaceFolder}/src/open-r1-multimodal/output/Q-Insight-comparison-debug-8gpu",
                "--model_name_or_path", "Qwen/Qwen2.5-VL-7B-Instruct",
                "--dataset_name", "None",
                "--dataset_comparison", "${workspaceFolder}/src/open-r1-multimodal/data_config/iqa_comparison.yaml",
                "--image_root", "${workspaceFolder}/src/open-r1-multimodal/data/DiffIQA/ValidationImage/images",
                "--max_prompt_length", "2048",
                "--num_generations", "8",
                "--per_device_train_batch_size", "2",
                "--gradient_accumulation_steps", "2",
                "--logging_steps", "1",
                "--bf16",
                "--torch_dtype", "bfloat16",
                "--data_seed", "42",
                "--report_to", "none",
                "--gradient_checkpointing", "false",
                "--attn_implementation", "flash_attention_2",
                "--num_train_epochs", "2",
                "--run_name", "Q-Insight-comparison-debug-8gpu",
                "--save_steps", "100",
                "--save_only_model", "true",
                "--score_reward_threshold", "0.35",
                "--beta", "0.001"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}/src/open-r1-multimodal",
            "env": {
                "DEBUG_MODE": "true",
                "LOG_PATH": "./debug_log_Q-Insight-comparison-debug-8gpu.txt",
                "OMP_NUM_THREADS": "8",
                "NCCL_IB_DISABLE": "0",
                "NCCL_IB_GID_INDEX": "3",
                "NCCL_SOCKET_IFNAME": "eth0",
                "COMPILE_GAN": "0",
                "USE_TIMELINE_SDK": "1",
                "CUDA_TIMER_STREAM_KAFKA_CLUSTER": "bmq_data_va",
                "CUDA_TIMER_STREAM_KAFKA_TOPIC": "megatron_cuda_timer_tracing_original_v2",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True",
                "NCCL_DEBUG": "OFF"
            },
            "python": "/root/Q-Insight/.venv/bin/python",
            "justMyCode": false,
            "stopOnEntry": false,
            "subProcess": true
        }
        ,
        {
            "name": "Q-Insight Eval Score RL (8 GPUs via torchrun)",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/.venv/bin/torchrun",
            "args": [
                "--nproc_per_node=8",
                "--nnodes=1",
                "--node_rank=0",
                "--master_addr=127.0.0.1",
                "--master_port=12345",
                "${workspaceFolder}/src/open-r1-multimodal/src/open_r1/eval_score_rl.py",
                "--deepspeed", "${workspaceFolder}/src/open-r1-multimodal/local_scripts/zero2.json",
                "--output_dir", "${workspaceFolder}/src/open-r1-multimodal/output/Q-Insight-eval-score-rl-debug-8gpu",
                "--model_name_or_path", "Qwen/Qwen2.5-VL-7B-Instruct",
                "--dataset_name", "None",
                "--dataset_score", "${workspaceFolder}/src/open-r1-multimodal/data_config/iqa_score_custom.yaml",
                "--score_prompt_file", "${workspaceFolder}/src/open-r1-multimodal/prompts/overall_1to5.txt",
                "--image_root", "/root/Q-Insight/paper-slide-crawler",
                "--max_prompt_length", "4096",
                "--num_generations", "8",
                "--per_device_train_batch_size", "1",
                "--gradient_accumulation_steps", "2",
                "--logging_steps", "1",
                "--bf16",
                "--torch_dtype", "bfloat16",
                "--data_seed", "42",
                "--report_to", "none",
                "--gradient_checkpointing", "false",
                "--attn_implementation", "flash_attention_2",
                "--num_train_epochs", "3",
                "--run_name", "Q-Insight-eval-score-rl-debug-8gpu",
                "--save_steps", "500",
                "--save_only_model", "true",
                "--score_reward_threshold", "0.5",
                "--beta", "0.001"
            ],
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}/src/open-r1-multimodal",
            "env": {
                "DEBUG_MODE": "false",
                "LOG_PATH": "./debug_log_Q-Insight-eval-score-rl-debug-8gpu.txt",
                "OMP_NUM_THREADS": "8",
                "NCCL_IB_DISABLE": "0",
                "NCCL_IB_GID_INDEX": "3",
                "NCCL_SOCKET_IFNAME": "eth0",
                "PYTORCH_CUDA_ALLOC_CONF": "expandable_segments:True",
                "NCCL_DEBUG": "OFF"
            },
            "python": "/root/Q-Insight/.venv/bin/python",
            "justMyCode": false,
            "stopOnEntry": false,
            "subProcess": true
        }
    ]
}
